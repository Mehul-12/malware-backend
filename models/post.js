const mongoose=require('mongoose');
const Schema=mongoose.Schema

const PostSchema=new Schema({
  title :{
    type:String,
    required:true
  },
  description:String,
  authorid:{
    type:Schema.Types.ObjectId,
    ref:'User'
  },
  authorname :{
    type:String
  }, 
  tags:[{
    key:String,
    label:String
  }],
  filelink:String,
  csvparsed:{
    type:String
  },
  posttype:String,
  postadmins:[{
    key:String,
    label:String
  }],
  acceptedver:[
    {
      nestedauthor: String,
      nesteddescription: String,
      nestedfilelink:String,
      nestedtime:{ type : Date, default: Date.now }
    }
  ],
  unacceptedver:[
    {
      nestedauthor: String,
      nesteddescription: String,
      nestedfilelink:String,
      nestedtime:{ type : Date, default: Date.now }
    }
  ],
  visibility:Boolean,
  comments:[
    {
      type:Schema.Types.ObjectId,
      ref:'Comment'
    }
  ],
  upvotes:[{
    type:Schema.Types.ObjectId,
    ref:'User'
  }],
  downvotes:[{
    type:Schema.Types.ObjectId,
      ref:'User'
  }],
  upcount:{
    type:Number,
    default:0
  },
  downcount:{
    type:Number,
    default:0
  },
  bookmark:{
    type:Number,
    default: 0
  }, //how many people have bookmarked it.
  time : { type : Date, default: Date.now }
})
module.exports=mongoose.model('Post',PostSchema)
